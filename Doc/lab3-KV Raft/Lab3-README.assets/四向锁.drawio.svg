<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1191px" height="581px" viewBox="-0.5 -0.5 1191 581" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-07-21T12:13:53.446Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&quot; etag=&quot;_OD4ddvghRiw1-GZNNK2&quot; version=&quot;21.6.2&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;第 1 页&quot; id=&quot;7Biunpa2JNx_0wgUib2D&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 0 290 L 1130 290" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><rect x="40" y="450" width="80" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 465px; margin-left: 41px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 24px;"><b style="">Raft层</b></font></div></div></div></foreignObject><text x="80" y="469" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Raft层</text></switch></g><rect x="20" y="140" width="120" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 160px; margin-left: 21px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 24px;"><b style="">应用层</b></font></div></div></div></foreignObject><text x="80" y="164" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">应用层</text></switch></g><rect x="280" y="30" width="240" height="190" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 125px; margin-left: 281px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px;"><br /></font></div></div></div></foreignObject><text x="400" y="129" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle"></text></switch></g><path d="M 110.5 129.5 L 110.5 119.5 L 220.5 119.5 L 220.5 109 L 239.5 124.5 L 220.5 140 L 220.5 129.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="300" y="55" width="200" height="140" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 125px; margin-left: 301px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">client通过RPC发来请求，调用kvserver的handle函数（Get / PutAppend），<b>拿到了锁 kv.mu</b>，并调用kv.rf.Start()，<b>等待Start()执行完才会释放锁kv.mu</b></font></div></div></div></foreignObject><text x="400" y="129" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">client通过RPC发来请求，调用kvserver的handle函数（Get / PutA...</text></switch></g><path d="M 394.5 230.5 L 404.5 230.5 L 404.5 350.5 L 415 350.5 L 399.5 369.5 L 384 350.5 L 394.5 350.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="280" y="390" width="240" height="190" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 485px; margin-left: 281px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px;"><br /></font></div></div></div></foreignObject><text x="400" y="489" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle"></text></switch></g><rect x="300" y="415" width="200" height="140" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 485px; margin-left: 301px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">rf.Start()内部需要先调用rf.GetState()获取raft peer的状态，但是<b>GetState()内部需要请求锁rf.mu</b>，导致rf.Start()也只能等待</font></div></div></div></foreignObject><text x="400" y="489" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">rf.Start()内部需要先调用rf.GetState()获取raft peer的状态，但是G...</text></switch></g><rect x="210" y="250" width="170" height="130" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 315px; margin-left: 211px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;"><font face="Comic Sans MS">handle等待rf.Start()执行结束才释放kv.mu</font></span></div></div></div></foreignObject><text x="295" y="319" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">handle等待rf.Start()执行结束才释放kv.mu</text></switch></g><path d="M 799.51 120 L 799.49 130 L 579.49 129.54 L 579.47 140.04 L 560.5 124.5 L 579.53 109.04 L 579.51 119.54 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 560.5 485 L 560.5 475 L 780.5 475 L 780.5 464.5 L 799.5 480 L 780.5 495.5 L 780.5 485 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="570" y="350" width="190" height="130" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 415px; margin-left: 571px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;"><font face="Comic Sans MS">rf.GetState()等待rf.applier()将lastApplied到commitIndex之间的日志都apply发送到applyCh后才能请求到rf.mu</font></span></div></div></div></foreignObject><text x="665" y="419" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">rf.GetState()等待rf.applier()将lastAp...</text></switch></g><rect x="830" y="390" width="260" height="190" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 485px; margin-left: 831px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px;"><br /></font></div></div></div></foreignObject><text x="960" y="489" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle"></text></switch></g><rect x="843.75" y="407.5" width="232.5" height="155" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 231px; height: 1px; padding-top: 485px; margin-left: 845px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 16px;">rf.applier()<b>先持有锁rf.mu</b>，直到日志apply到commitIndex的位置前都不会释放rf.mu，但是每个日志apply需要将applyMsg发送到applyCh，<b>如果kv.applyLog()不在另一端取出applyMsg这边就无法发送后续的applyMsg</b></font></div></div></div></foreignObject><text x="960" y="489" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">rf.applier()先持有锁rf.mu，直到日志apply到commitIndex的位置前都不会释放rf.mu，但是每个日志a...</text></switch></g><path d="M 964.5 369.52 L 954.5 369.48 L 954.93 249.48 L 944.43 249.44 L 960 230.5 L 975.43 249.56 L 964.93 249.52 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="830" y="30" width="260" height="190" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 125px; margin-left: 831px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 14px;"><br /></font></div></div></div></foreignObject><text x="960" y="129" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle"></text></switch></g><rect x="850" y="48.75" width="220" height="152.5" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 125px; margin-left: 851px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;">kv.applyLog()在<b>等待请求锁kv.mu</b>，如果请求不到锁，也就无法执行后面在状态机应用拿到命令，也就<b>无法进入下一次循环从applyCh中取出下一个applyMsg</b>。由于applyCh无缓冲，因此rf.applier()就无法继续发送</span></div></div></div></foreignObject><text x="960" y="129" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">kv.applyLog()在等待请求锁kv.mu，如果请求不到锁，也就无法执行后面在状态机应用拿到命令，也就无法进入下一次循环从applyCh中取出下一个applyMsg。由于app...</text></switch></g><rect x="970" y="260" width="220" height="140" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 330px; margin-left: 971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;"><font face="Comic Sans MS">rf.applier()等待kv.applyLog()从applyCh中取出发送的所有applyMsg才释放rf.mu</font></span></div></div></div></foreignObject><text x="1080" y="334" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">rf.applier()等待kv.applyLog()从applyCh中取出发送的所有appl...</text></switch></g><rect x="590" y="0" width="190" height="130" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 65px; margin-left: 591px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-size: 16px;"><font face="Comic Sans MS">kv.applyLog()等待handle函数释放kv.mu才能请求到kv.mu，从而继续在状态机执行命令</font></span></div></div></div></foreignObject><text x="685" y="69" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">kv.applyLog()等待handle函数释放kv.mu才能请求到kv.mu，从而继续在状态机执行命令</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>